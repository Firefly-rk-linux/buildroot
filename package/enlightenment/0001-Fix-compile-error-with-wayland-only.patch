From 963b69842897406aa238b5e5eca2aaf840a227f2 Mon Sep 17 00:00:00 2001
From: Jeffy Chen <jeffy.chen@rock-chips.com>
Date: Fri, 1 Jul 2022 18:15:50 +0800
Subject: [PATCH] Fix compile error with wayland-only

Signed-off-by: Jeffy Chen <jeffy.chen@rock-chips.com>
---
 src/bin/e_includes.h                         | 2 ++
 src/modules/conf_randr/e_int_config_randr2.c | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/src/bin/e_includes.h b/src/bin/e_includes.h
index c2b0e69a9..8d161b569 100644
--- a/src/bin/e_includes.h
+++ b/src/bin/e_includes.h
@@ -151,8 +151,10 @@
 #include "e_comp_canvas.h"
 #include "e_utils.h"
 #include "e_hints.h"
+#ifndef HAVE_WAYLAND_ONLY
 #include "e_comp_x_devices.h"
 #include "e_comp_x_randr.h"
+#endif
 #include "e_watchdog.h"
 #include "e_gesture.h"
 
diff --git a/src/modules/conf_randr/e_int_config_randr2.c b/src/modules/conf_randr/e_int_config_randr2.c
index 9f2163b41..0712c0520 100644
--- a/src/modules/conf_randr/e_int_config_randr2.c
+++ b/src/modules/conf_randr/e_int_config_randr2.c
@@ -392,9 +392,11 @@ _basic_screen_info_fill(E_Config_Dialog_Data *cfdata, E_Config_Randr2_Screen *cs
           {
              mode_cbdata->cfdata = cfdata;
              mode_cbdata->mode = *m;
+#ifndef HAVE_WAYLAND_ONLY
              if (m->flags & ECORE_X_RANDR_MODE_DOUBLE_SCAN)
                snprintf(buf, sizeof(buf), "%ix%i @ %1.2fHz (Doublescan)", m->w, m->h, m->refresh / 2);
              else
+#endif
                snprintf(buf, sizeof(buf), "%ix%i @ %1.2fHz", m->w, m->h, m->refresh);
              it = elm_list_item_append(cfdata->modes_obj, buf, NULL, NULL, _cb_mode_set, mode_cbdata);
              cfdata->freelist = eina_list_append(cfdata->freelist, mode_cbdata);
-- 
2.20.1

